{"version":3,"sources":["components/SearchForm/SearchBar.module.css","components/PhotoCard/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Modal/Modal.module.css","components/Gallery/ImageGallery.module.css","components/App/App.module.css","components/SearchForm/SearchBar.jsx","services/image-api.js","components/ErrorNotification/ErrorNotification.jsx","components/Loader/Loader.jsx","services/mapper.js","components/PhotoCard/ImageGalleryItem.jsx","components/Button/Button.jsx","components/Gallery/ImageGallery.jsx","components/Modal/Modal.jsx","components/App/App.jsx","index.js"],"names":["module","exports","SearchForm","state","query","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSearch","className","styles","Searchbar","onSubmit","this","SearchForm_button","SearchForm_button_label","SearchForm_input","type","autoComplete","placeholder","onChange","Component","fetchImg","pageNumder","fetch","mode","then","res","json","data","hits","ErrorNotification","message","LOADER_ROOT","document","querySelector","Loader","createPortal","x","y","rx","ry","width","height","mapper","images","map","id","webformat","webformatURL","largeImage","largeImageURL","tags","PhotoCard","ImageGalleryItem","key","onClick","src","alt","ImageGalleryItem_image","Button","ButtonWrapper","Gallery","loadMore","ImageGallery","idOfCurrentImage","parentElement","MODAL_ROOT","Modal","backdropRef","createRef","handleKeyPress","console","log","code","onClose","handleBackdropClick","current","window","addEventListener","removeEventListener","children","Overlay","ref","role","App","isLoading","error","pageNumber","isModalOpen","linkLargeImage","rootRef","fetchImages","imageAPI","catch","finally","scrollTo","top","body","scrollHeight","behavior","scrollTop","openModal","closeModal","getLinkLargeImage","currentItemImage","find","item","Number","prevProps","prevState","length","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.79ed3ac1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"SearchBar_Searchbar__1oAJu\",\"SearchForm\":\"SearchBar_SearchForm__4Lpjk\",\"SearchForm_button\":\"SearchBar_SearchForm_button__3wCzT\",\"SearchForm_button_label\":\"SearchBar_SearchForm_button_label__39vWM\",\"SearchForm_input\":\"SearchBar_SearchForm_input__2BaI-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__36CNu\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__NU9xk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ButtonWrapper\":\"Button_ButtonWrapper__2988v\",\"Button\":\"Button_Button__3R1xi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2AxMb\",\"Modal\":\"Modal_Modal__2WBTT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1xr7v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__aOmNj\"};","import React, { Component } from 'react';\r\nimport styles from './SearchBar.module.css';\r\n\r\nexport default class SearchForm extends Component {\r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      query: e.target.value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    this.props.onSearch(this.state.query);\r\n    this.setState({ query: '' });\r\n  };\r\n  render() {\r\n    return (\r\n      <div className={styles.Searchbar}>\r\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button className={styles.SearchForm_button}>\r\n            <label className={styles.SearchForm_button_label} />\r\n          </button>\r\n          <input\r\n            className={styles.SearchForm_input}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            placeholder=\"Search images...\"\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export const fetchImg = (query = '', pageNumder = 1) => {\r\n  return fetch(\r\n    `https://pixabay.com/api/?key=14303994-a532731a1c231e158fb1fa934&q=${query}&page=${pageNumder}`,\r\n    { mode: 'cors' },\r\n  )\r\n    .then(res => res.json())\r\n    .then(data => data.hits);\r\n};\r\n// https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${query}&page=${pageNumder}&per_page=12&key=14303994-a532731a1c231e158fb1fa934\r\n// `https://pixabay.com/api/?key=14303994-a532731a1c231e158fb1fa934&q=${query}`\r\n","import React from 'react';\r\n\r\nconst ErrorNotification = message => <div>Error: {message}</div>;\r\n\r\nexport default ErrorNotification;\r\n","import React from 'react';\r\nimport ContentLoader from 'react-content-loader';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst LOADER_ROOT = document.querySelector('#loader-root');\r\n\r\nconst Loader = () =>\r\n  createPortal(\r\n    <ContentLoader>\r\n      {/* Only SVG shapes */}\r\n      <rect x=\"0\" y=\"0\" rx=\"5\" ry=\"5\" width=\"70\" height=\"70\" />\r\n      <rect x=\"80\" y=\"17\" rx=\"4\" ry=\"4\" width=\"300\" height=\"13\" />\r\n      <rect x=\"80\" y=\"40\" rx=\"3\" ry=\"3\" width=\"250\" height=\"10\" />\r\n    </ContentLoader>,\r\n    LOADER_ROOT,\r\n  );\r\n\r\nexport default Loader;\r\n","export const mapper = images => {\r\n  return images.map(\r\n    ({ id, webformatURL: webformat, largeImageURL: largeImage, tags }) => ({\r\n      id,\r\n      webformat,\r\n      largeImage,\r\n      tags,\r\n    }),\r\n  );\r\n};\r\n","import React, { Component } from 'react';\r\nimport styles from './ImageGalleryItem.module.css';\r\n\r\nconst PhotoCard = ({ id, webformat, largeImage, tags }) => {\r\n  const showLargeImage = e => {\r\n    // console.dir(e.currentTarget.id);\r\n  };\r\n  return (\r\n    <li\r\n      id={id}\r\n      className={styles.ImageGalleryItem}\r\n      key={id}\r\n      onClick={showLargeImage}\r\n    >\r\n      <img\r\n        src={webformat}\r\n        alt={tags}\r\n        className={styles.ImageGalleryItem_image}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default PhotoCard;\r\n","import React from 'react';\nimport styles from './Button.module.css';\n\nconst Button = ({ onClick }) => (\n  <div className={styles.ButtonWrapper}>\n    <button type=\"button\" className={styles.Button} onClick={onClick}>\n      Load more\n    </button>\n  </div>\n);\n\nexport default Button;\n","import React from 'react';\r\nimport PhotoCard from '../PhotoCard/ImageGalleryItem';\r\nimport Button from '../Button/Button';\r\nimport styles from './ImageGallery.module.css';\r\n\r\nconst Gallery = ({ images, loadMore, onClick }) => {\r\n  const showLargeImage = ({ target }) => {\r\n    const idOfCurrentImage = target.parentElement.id;\r\n    onClick(idOfCurrentImage);\r\n  };\r\n  return (\r\n    <div>\r\n      <ul className={styles.ImageGallery} onClick={showLargeImage}>\r\n        {images.map(({ id, webformat, largeImage, tags }) => (\r\n          <PhotoCard\r\n            id={id}\r\n            webformat={webformat}\r\n            largeImage={largeImage}\r\n            tags={tags}\r\n          />\r\n        ))}\r\n      </ul>\r\n      <Button onClick={loadMore} />\r\n    </div>\r\n  );\r\n};\r\nexport default Gallery;\r\n","import React, { Component, createRef } from 'react';\nimport styles from './Modal.module.css';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nconst MODAL_ROOT = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func.isRequired,\n  };\n\n  backdropRef = createRef();\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyPress);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyPress);\n  }\n\n  handleKeyPress = e => {\n    console.log(e);\n\n    if (e.code !== 'Escape') {\n      return;\n    }\n\n    this.props.onClose();\n  };\n\n  handleBackdropClick = e => {\n    if (this.backdropRef.current && e.target !== this.backdropRef.current) {\n      return;\n    }\n\n    this.props.onClose();\n  };\n\n  render() {\n    const { children } = this.props;\n    return createPortal(\n      <div\n        className={styles.Overlay}\n        ref={this.backdropRef}\n        onClick={this.handleBackdropClick}\n        role=\"presentation\"\n      >\n        <div className={styles.Modal}>{children}</div>\n      </div>,\n      MODAL_ROOT,\n    );\n  }\n}\n","import React, { Component, createRef } from 'react';\r\nimport SearchForm from '../SearchForm/SearchBar';\r\nimport * as imageAPI from '../../services/image-api';\r\nimport ErrorNotification from '../ErrorNotification/ErrorNotification';\r\nimport Loader from '../Loader/Loader';\r\nimport { mapper } from '../../services/mapper';\r\nimport Gallery from '../Gallery/ImageGallery';\r\nimport styles from './App.module.css';\r\nimport Modal from '../Modal/Modal';\r\n\r\nexport default class App extends Component {\r\n  state = {\r\n    images: [],\r\n    isLoading: false,\r\n    error: null,\r\n    pageNumber: 1,\r\n    query: '',\r\n    isModalOpen: false,\r\n    linkLargeImage: '',\r\n  };\r\n\r\n  rootRef = createRef();\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.query !== this.state.query) {\r\n      this.fetchImages();\r\n    }\r\n  }\r\n\r\n  fetchImages = () => {\r\n    const { query, pageNumber } = this.state;\r\n    this.setState({ isLoading: true });\r\n\r\n    imageAPI\r\n      .fetchImg(query, pageNumber)\r\n      .then(images => {\r\n        this.setState(state => ({\r\n          images: [...state.images, ...mapper(images)],\r\n          pageNumber: state.pageNumber + 1,\r\n        }));\r\n      })\r\n      .catch(error => {\r\n        this.setState({ error });\r\n      })\r\n      .finally(() => {\r\n        this.setState({ isLoading: false });\r\n        window.scrollTo({\r\n          top: document.body.scrollHeight,\r\n          behavior: 'smooth',\r\n        });\r\n      });\r\n    this.rootRef.current.scrollTop = this.rootRef.current.scrollHeight;\r\n  };\r\n\r\n  onSearch = query => {\r\n    this.setState({ query, images: [], pageNumber: 1 });\r\n  };\r\n\r\n  openModal = () => this.setState({ isModalOpen: true });\r\n\r\n  closeModal = () => this.setState({ isModalOpen: false });\r\n\r\n  getLinkLargeImage = id => {\r\n    const currentItemImage = this.state.images.find(\r\n      item => item.id === Number(id),\r\n    );\r\n    this.openModal();\r\n    this.setState({ linkLargeImage: currentItemImage.largeImage });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      error,\r\n      isLoading,\r\n      images,\r\n      isModalOpen,\r\n      linkLargeImage,\r\n    } = this.state;\r\n    return (\r\n      <div ref={this.rootRef} className={styles.App}>\r\n        <SearchForm onSearch={this.onSearch} />\r\n        {error && <ErrorNotification message={error.message} />}\r\n        {isLoading && <Loader />}\r\n        {images.length > 0 && (\r\n          <Gallery\r\n            images={images}\r\n            loadMore={this.fetchImages}\r\n            onClick={this.getLinkLargeImage}\r\n          />\r\n        )}\r\n        {isModalOpen && (\r\n          <Modal onClose={this.closeModal}>\r\n            <img src={linkLargeImage} alt=\"\" />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}